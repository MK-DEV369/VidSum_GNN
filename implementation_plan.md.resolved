# VIDSUM-GNN Implementation Plan

# Goal Description
Build a working backend prototype for VIDSUM-GNN, a video summarization pipeline using Graph Neural Networks. The system will ingest videos, process them into shots, extract multi-modal features, build a graph, score shots using a GATv2 model, and assemble a summary.

## User Review Required
> [!IMPORTANT]
> **Model Weights & Hardware**: The plan assumes access to Hugging Face for model weights (ViT, Wav2Vec2). The GNN model (GATv2) requires training to be useful, but this prototype will implement the *architecture* and *inference pipeline* with initialized weights for demonstration unless a training script is explicitly run.
> **Dependencies**: `torch-geometric` (PyG) installation can be environment-specific. The Dockerfile will attempt a standard CUDA build, but fallback to CPU or DGL might be necessary if hardware varies.

## Proposed Changes

### Project Structure
The project will be organized as a modular Python package `vidsum_gnn`.

### Infrastructure [NEW]
#### [NEW] [docker-compose.yml](file:///e:/5th%20SEM%20Data/AI253IA-Artificial%20Neural%20Networks%20and%20deep%20learning(ANNDL)/ANN_Project/docker-compose.yml)
- Services: `app` (FastAPI), `db` (TimescaleDB/Postgres).

#### [NEW] [Dockerfile](file:///e:/5th%20SEM%20Data/AI253IA-Artificial%20Neural%20Networks%20and%20deep%20learning(ANNDL)/ANN_Project/Dockerfile)
- Python 3.10+, PyTorch 2.x, FFmpeg 6.0+.

### Core Modules [NEW]
#### [NEW] `vidsum_gnn/core/config.py`
- Configuration settings (paths, hyperparameters).

#### [NEW] `vidsum_gnn/db/`
- `schema.sql`: TimescaleDB schema definitions.
- `client.py`: Database connection and CRUD.

#### [NEW] `vidsum_gnn/processing/`
- `video.py`: FFmpeg wrappers for probing, transcoding, chunking.
- `shot_detection.py`: Shot boundary detection logic.
- `audio.py`: Audio extraction and processing.

#### [NEW] `vidsum_gnn/features/`
- `visual.py`: ViT-B/16 wrapper.
- `audio.py`: Wav2Vec2 wrapper.
- `text.py`: SBERT wrapper (optional/placeholder).

#### [NEW] `vidsum_gnn/graph/`
- `builder.py`: Logic to convert shots to graph nodes and edges (temporal, semantic, audio-sync).
- `model.py`: GATv2 PyTorch module.

#### [NEW] `vidsum_gnn/summary/`
- `selector.py`: Algorithms for shot selection (Greedy, Knapsack).
- `assembler.py`: FFmpeg command generation for summary assembly.

### API [NEW]
#### [NEW] `vidsum_gnn/api/`
- `main.py`: FastAPI app entry point.
- `routes.py`: Endpoints for upload, process, status.
- `tasks.py`: Background task logic.

## Verification Plan

### Automated Tests
- Since this is a prototype generation, we will focus on unit tests for key components if requested, but primarily rely on the `walkthrough.md` to demonstrate functionality.
- We will verify the `docker build` succeeds.

### Manual Verification
- **Upload & Process**: Simulate a video upload and check logs for pipeline progression.
- **Graph Construction**: Verify graph node/edge counts match expectations for a dummy input.
- **Output**: Check if a summary video file is generated (mocked if no real video provided).
